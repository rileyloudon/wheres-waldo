(this["webpackJsonpwheres-waldo"]=this["webpackJsonpwheres-waldo"]||[]).push([[0],{34:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(27),o=n.n(r),i=(n(34),n(5)),s=n.p+"static/media/pallet-town-on-parade-title.efdc353a.png",d=n(1),l=function(){return Object(d.jsx)("header",{children:Object(d.jsx)("img",{id:"title",src:s,alt:"Pallet Town On Parade"})})},u=n(29),h=n(9),j=n(6);n(36),n(26);j.a.apps.length?j.a.app():j.a.initializeApp({apiKey:"AIzaSyAeqwNXZKfTkNi8zXI-Sk-gDMGAuLv5HTA",authDomain:"wheres-waldo-c710d.firebaseapp.com",projectId:"wheres-waldo-c710d",storageBucket:"wheres-waldo-c710d.appspot.com",messagingSenderId:"323021756225",appId:"1:323021756225:web:fe289f8025376aeb0973c0"});var m=function(){return j.a.auth().currentUser},b=function(){return j.a.auth().signInAnonymously()},f=function(e){var t=e.loadingPokemon,n=e.remainingPokemon,a=e.startGame;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{children:"Welcome to Pallet Town's annual parade! "}),Object(d.jsx)("p",{children:"This year we have selected the following Pokemon for you to catch:"}),!t&&n.map((function(e){return Object(d.jsx)("img",{className:"hidden-pokemon",src:"img/hidden-pokemon/".concat(e,".svg"),alt:e},e)})),Object(d.jsxs)("dl",{children:[Object(d.jsx)("dt",{children:"How to play:"}),Object(d.jsx)("dd",{children:"1. Click on the map to throw a Pokeball"}),Object(d.jsx)("dd",{children:"2. Aim for the center of each Pokemon"}),Object(d.jsx)("dd",{children:"3. Catch 'em all as fast as you can to be added to the leaderboards"}),Object(d.jsx)("dd",{children:"Have Fun!"})]}),Object(d.jsx)("button",{className:"start",onClick:a,children:"Start Game"})]})},O=n.p+"static/media/pallet-town-on-parade-gameboard.3cf50eb5.jpg",p=n.p+"static/media/pokeball.5a45c02d.svg",g=function(e){var t=e.remainingPokemon,n=e.pokeballStyles,a=e.handleGameClick;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"remaining",children:t.map((function(e){return Object(d.jsx)("img",{className:"hidden-pokemon",src:"img/hidden-pokemon/".concat(e,".svg"),alt:e},e)}))}),Object(d.jsx)("img",{className:"pokeball",src:p,alt:"Targeting Pokeball",style:n}),Object(d.jsx)("img",{onClick:function(e){return a(e)},id:"gameboard",src:O,alt:"Gameboard"})]})},x=function(e){var t=e.userTime,n=e.userPokemon,c=Object(i.f)(),r=Object(a.useState)(!1),o=Object(h.a)(r,2),s=o[0],l=o[1],u=Object(a.useState)(""),m=Object(h.a)(u,2),b=m[0],f=m[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Congratulations!"}),Object(d.jsxs)("p",{children:["You found everyone in ",t.toFixed(2)," seconds!"]}),Object(d.jsx)("p",{children:"Would you like to be added to the leaderboard?"}),s?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("label",{className:"name-input",children:["Whats your name?",Object(d.jsx)("input",{placeholder:"Ash",type:"text",value:b,maxLength:"12",onChange:function(e){return f(e.target.value)}})]}),Object(d.jsx)("button",{className:"cancelBtn",onClick:function(){return c.push("/leaderboards")},children:"Cancel"}),Object(d.jsx)("button",{className:"addBtn",onClick:function(){c.push("/leaderboards"),function(e,t,n){var a=j.a.auth().currentUser;j.a.firestore().collection("leaderboards").add({name:e||"Ash",pokemon:t,time:n,id:a.uid})}(b,n,t)},children:"Add"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{className:"noBtn",onClick:function(){return c.push("/leaderboards")},children:"No"}),Object(d.jsx)("button",{className:"yesBtn",onClick:function(){return l(!0)},children:"Yes"})]})]})},k=function(){var e=Object(a.useState)({top:0,left:0,opacity:0}),t=Object(h.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!0),o=Object(h.a)(r,2),i=o[0],s=o[1],l=Object(a.useState)(!1),m=Object(h.a)(l,2),O=m[0],p=m[1],k=Object(a.useState)(!0),v=Object(h.a)(k,2),w=v[0],y=v[1],S=Object(a.useState)(),N=Object(h.a)(S,2),P=N[0],T=N[1],M=Object(a.useState)(0),C=Object(h.a)(M,2),A=C[0],B=C[1],I=Object(a.useState)([]),F=Object(h.a)(I,2),E=F[0],G=F[1];return Object(a.useEffect)((function(){var e=["kabutops","ditto","pikachu","magnemite","gengar","diglett","mr_mime","persian","eevee"],t=Math.floor(Math.random()*e.length),n=e[t];e.splice(t,1);var a=Math.floor(Math.random()*e.length),c=e[a];e.splice(a,1);var r=e[Math.floor(Math.random()*e.length)];T([n,c,r]),y(!1)}),[]),i?Object(d.jsx)(f,{loadingPokemon:w,remainingPokemon:P,startGame:function(){s(!1),b().then((function(){!function(e){var t=j.a.auth().currentUser;j.a.firestore().collection("game-sessions").doc(t.uid).set({pokemon:e,startTime:j.a.firestore.Timestamp.now()})}(P)}))}}):O?Object(d.jsx)(x,{userTime:A,userPokemon:E}):Object(d.jsx)(g,{remainingPokemon:P,pokeballStyles:n,handleGameClick:function(e){var t=document.getElementById("gameboard"),n=t.width/1347,a=t.height/959,r=Math.round((e.pageX-t.offsetLeft)/n),o=Math.round((e.pageY-document.querySelector("header").offsetHeight-document.querySelector(".remaining").offsetHeight)/a),i=document.querySelector(".pokeball");c({top:e.pageY-i.height/2,left:e.pageX-i.width/2,opacity:100}),function(e,t,n,a,c){var r=[];return j.a.firestore().collection("pokemon-locations").where(j.a.firestore.FieldPath.documentId(),"in",c).get().then((function(c){return c.forEach((function(e){r.unshift(e.data())})),r.find((function(c){return c.location[0]>=e&&c.location[0]<=t&&c.location[1]>=n&&c.location[1]<=a}))})).catch((function(e){return console.log(e)}))}(t.width>500?r-i.width/2:r-i.width,t.width>500?r+i.width/2:r+i.width,t.height>500?o-i.height/2:o-i.height,t.height>500?o+i.height/2:o+i.height,P).then((function(e){if("object"===typeof e){var t=Object(u.a)(P),n=P.indexOf(e.name);t.splice(n,1),t.length>0?T(t):(function(){var e=j.a.auth().currentUser;return j.a.firestore().collection("game-sessions").doc(e.uid).set({endTime:j.a.firestore.Timestamp.now()},{merge:!0})}().then((function(){(function(){var e=j.a.auth().currentUser;return j.a.firestore().collection("game-sessions").doc(e.uid).get().then((function(e){return e.data()}))})().then((function(e){B(e.endTime-e.startTime),G(e.pokemon)})).then((function(){return function(){var e=j.a.auth().currentUser;return j.a.firestore().collection("game-sessions").doc(e.uid).delete()}()}))})),p(!0))}}))}})},v=(n(46),function(){var e=Object(i.f)(),t=Object(a.useState)([]),n=Object(h.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)([]),s=Object(h.a)(o,2),l=s[0],u=s[1],f=Object(a.useState)(),O=Object(h.a)(f,2),p=O[0],g=O[1],x=Object(a.useState)(),k=Object(h.a)(x,2),v=k[0],w=k[1],y=Object(a.useState)(m()),S=Object(h.a)(y,2),N=S[0],P=S[1];N||b().then((function(){return P(m())})),Object(a.useEffect)((function(){var e=j.a.firestore().collection("leaderboards").orderBy("time","asc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),r(t)}));return function(){e()}}),[]),Object(a.useEffect)((function(){if(u(c.slice(0,10)),N){var e=c.findIndex((function(e){return e.id===N.uid}));w(c[e]),g(e)}}),[c,N]);var T=function(e,t){return Object(d.jsxs)("tr",{className:t>10||e===v?"user-best":null,children:[Object(d.jsxs)("td",{className:"rank",children:[t+1,". "]}),Object(d.jsx)("td",{className:"name",children:e.name}),Object(d.jsxs)("td",{className:"pokemon",children:["mr_mime"!==e.pokemon[0]?e.pokemon[0]:"Mr. Mime",","," ","mr_mime"!==e.pokemon[1]?e.pokemon[1]:"Mr. Mime",","," ","mr_mime"!==e.pokemon[2]?e.pokemon[2]:"Mr. Mime"]}),Object(d.jsxs)("td",{className:"time",children:[e.time.toFixed(2),"s"]})]},e.name+e.time)};return Object(d.jsxs)("div",{id:"leaderboards",children:[Object(d.jsx)("h2",{children:"Leaderboards"}),Object(d.jsx)("button",{className:"play-again",onClick:function(){return e.push("/")},children:"Play Again"}),p<10&&-1!==p&&Object(d.jsx)("p",{className:"user-best",children:"Your Best Time"}),Object(d.jsxs)("table",{children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Rank"}),Object(d.jsx)("th",{children:"Name"}),Object(d.jsx)("th",{children:"Pokemon Caught"}),Object(d.jsx)("th",{children:"Time"})]})}),Object(d.jsx)("tbody",{className:"leaderboard-entry",children:l.map((function(e,t){return T(e,t)}))})]}),p>10&&Object(d.jsxs)("table",{children:[Object(d.jsx)("thead",{children:Object(d.jsx)("tr",{children:Object(d.jsx)("th",{colSpan:"4",children:"Your Best Time"})})}),Object(d.jsx)("tbody",{className:"leaderboard-entry",children:T(v,p)})]})]})});n(47);var w=function(){return Object(d.jsxs)("div",{className:"Pallet-Town-On-Parade",children:[Object(d.jsx)(l,{}),Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{exact:!0,path:"/",component:k}),Object(d.jsx)(i.a,{exact:!0,path:"/leaderboards",component:v})]})]})},y=n(23);o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(y.a,{children:Object(d.jsx)(w,{})})}),document.getElementById("app"))}},[[48,1,2]]]);
//# sourceMappingURL=main.ccf16a9e.chunk.js.map